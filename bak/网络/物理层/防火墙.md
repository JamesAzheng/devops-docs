# 硬件防火墙主要功能

绝大多数的硬件防火墙都可以提供以下功能：

### 访问控制

- 硬件防火墙可以控制网络流量，限制不需要的网络流量进入网络，从而减少网络风险。它可以根据端口、协议、应用程序、源IP地址和目标IP地址等规则来控制访问。



### VPN支持

- Virtual Private Network，虚拟私有网络
- 硬件防火墙可以提供VPN支持，允许远程用户通过Internet安全地访问内部网络，保护数据传输的安全性。



### 抗拒绝服务攻击（DDoS）

- 硬件防火墙可以通过过滤或抵御DDoS攻击，防止网络系统崩溃。



### 内容过滤

- 硬件防火墙可以对传输的数据包进行检查，阻止恶意的流量和协议。



### NAT

- （Network Address Translation，网络地址转换）
- 硬件防火墙可以实现NAT功能，允许多个计算机共享一个公共IP地址。



### IPSec支持

- 硬件防火墙可以提供IPSec支持，保护内部网络中的数据传输的机密性、完整性和可用性。

IPSec（Internet Protocol Security，互联网协议安全性）是一组协议，用于保护IP数据包的机密性、完整性和身份验证。IPSec提供了一种安全的通信机制，可以用于保护互联网、局域网和虚拟专用网络（VPN）等网络中的数据传输。下面对IPSec的主要组成部分和功能进行详细介绍。

1. AH（Authentication Header）认证头：提供数据完整性和身份验证，防止数据包被篡改或伪造。AH可以对数据包进行加密，确保数据包的机密性。
2. ESP（Encapsulating Security Payload）封装安全负载：提供数据机密性、完整性和身份验证，对数据进行加密和认证，防止数据被窃听、篡改或伪造。
3. IKE（Internet Key Exchange）互联网密钥交换：用于建立IPSec连接的安全通道，通过交换密钥协商过程，确保通信双方可以共享安全密钥，保护数据传输的安全性。
4. SPD（Security Policy Database）安全策略数据库：用于管理和实施IPSec策略，包括定义IPSec加密算法、认证算法、密钥协商参数等信息。
5. SAD（Security Association Database）安全关联数据库：存储IPSec连接中的安全参数，如加密算法、密钥长度、认证算法等信息。

IPSec的实现方式包括隧道模式和传输模式。隧道模式用于保护整个IP数据包，适用于网关到网关的VPN连接；传输模式只保护IP数据包的有效载荷，适用于主机到主机的VPN连接。

IPSec可以应用于多种安全场景，如远程访问、站点到站点的VPN、安全局域网和安全移动性等。它可以在网络层提供安全性，与应用程序无关，因此可以用于任何支持IP协议的应用程序，包括Web、电子邮件、文件传输等。



**IPSec 和 TLS 的区别**

IPSec和TLS（Transport Layer Security，传输层安全）都是常见的安全协议，用于保护网络中的数据传输。它们的主要区别如下：

1. OSI层次不同：IPSec工作在网络层，而TLS工作在传输层。因此，IPSec可以保护整个IP数据包，而TLS只能保护应用层协议（如HTTP、FTP）的数据部分。
2. 支持应用不同：TLS主要应用于Web浏览器和Web服务器之间的加密通信，而IPSec主要用于保护网络中的VPN连接和IP数据包的安全传输。
3. 密钥管理方式不同：TLS使用公钥基础设施（PKI）和证书颁发机构（CA）来管理密钥，而IPSec使用IKE协议来协商密钥和安全参数。
4. 部署方式不同：TLS可以通过应用程序部署，因此可以轻松地在Web服务器和Web浏览器之间实现安全通信。IPSec通常需要网络管理员在网络设备上配置安全策略，并对网络设备进行定期维护。

总的来说，IPSec更适合于保护整个网络层的安全，而TLS更适合于保护应用层的安全。在实际应用中，它们可以根据需求进行选择和部署。



**IKE 用的是 Diffie–Hellman 吗**

是的，IKE（Internet Key Exchange，互联网密钥交换）协议通常使用Diffie-Hellman算法来协商对称密钥。Diffie-Hellman算法是一种密钥交换算法，可以让通信双方在不直接交换密钥的情况下共同计算出一个共享密钥。在IKE协议中，Diffie-Hellman算法通常用于协商用于加密和身份验证的密钥材料。此外，IKE协议还使用数字签名算法来确保身份验证和数据完整性。



### 动态主机配置协议（DHCP）支持

- 硬件防火墙可以支持DHCP协议，自动为内部网络中的计算机分配IP地址。



### 网络监控和日志记录

- 硬件防火墙可以记录网络活动和事件，监控网络流量，提供安全报告和日志记录，以便管理员及时了解网络安全情况。



### 路由功能

- 硬件防火墙可以进行路由控制，将数据包从源地址传输到目标地址，实现网络通信。



### 交换机

- 现在的硬件防火墙大多数都具有交换机的功能，这被称为“防火墙交换机”（firewall switch）或“集成防火墙”（integrated firewall）。
- 防火墙交换机将防火墙和交换机功能合并到一台设备中，允许设备能够同时提供交换机和防火墙的功能，从而简化了网络拓扑结构，并提高了网络安全性。
- 防火墙交换机可以对进入和离开网络的数据流量进行过滤、监测和控制，确保网络的安全和可靠性。它还可以对不同的网络流量进行分组和优先级处理，提高网络性能和可管理性。
- 总之，现在的硬件防火墙大多数都具有交换机的功能，这使得网络管理更加方便和安全。



### 负载均衡

- 并非所有硬件防火墙都具备负载均衡的功能，但是很多现代的硬件防火墙都支持负载均衡功能。负载均衡可以帮助网络管理员有效地分配网络流量，从而提高网络性能和可靠性。
- 负载均衡的作用是将网络流量分配到多个服务器上，以使每台服务器的工作负载均衡，提高整个网络的性能和可用性。负载均衡可以通过多种方式实现，如基于轮询、基于加权轮询、基于哈希等方式。
- 许多现代的硬件防火墙都具有内置的负载均衡功能，以帮助网络管理员更好地管理网络流量并提高网络性能。这些防火墙通常具有多个接口，支持不同的网络协议和负载均衡算法，可以轻松地集成到网络拓扑中。
- 总之，虽然不是所有的硬件防火墙都具有负载均衡的功能，但现代的硬件防火墙大多数都支持负载均衡，这有助于提高网络性能和可靠性。





# 防火墙物理接口说明

## IPMI

IPMI（Intelligent Platform Management Interface，智能平台管理接口）是一种远程管理协议，它允许管理员通过网络远程管理物理防火墙，例如监视系统状态、重启系统、更改BIOS设置等。在物理防火墙上，IPMI接口通常是一种远程管理卡或芯片，通常与物理防火墙的主板集成在一起，以提供远程管理功能。

IPMI接口通常具有自己的IP地址，并且通常连接到物理防火墙上的管理网络端口。在一些情况下，IPMI接口也可以通过物理防火墙上的某些其他端口进行访问，例如通过防火墙的串口或USB接口。

需要注意的是，IPMI接口并不是用于防火墙上的网络流量的接口，而是用于远程管理和监控物理防火墙的接口。因此，在防火墙上配置防火墙规则时，IPMI接口通常不会被考虑在内。



## Ether & Pether

- Ether（Ethernet）：连接到外部网络的物理网络接口，它可以与外部网络（如互联网）上的其他设备通信，并允许防火墙控制从外部网络流入或流出的网络流量。
- Pether（protected Ethernet）：连接到内部网络的接口，防火墙的所有安全规则都应用于该接口的流量。它通常被用来保护内部网络，例如，公司内部的局域网或者数据中心。

总之，物理防火墙的eth口和peth口的作用是分别连接到外部和内部网络，它们协同工作来保护内部网络的安全，控制外部网络和内部网络之间的数据流量。



## MGMT

在SonicWALL防火墙中，MGMT是指设备的管理接口。管理接口（Management Interface）是一个用于配置和管理设备的网络接口。在SonicWALL防火墙中，MGMT接口通常是通过Web界面或SSH连接进行管理的。

MGMT接口的主要功能是允许管理员通过网络连接到设备，配置和管理设备设置、监控设备状态和性能，并查看日志和警报。管理员可以在MGMT接口上配置各种设备设置，例如网络接口、VPN、安全策略、端口转发等。

SonicWALL防火墙的MGMT接口通常使用一个专用的网络接口进行连接，而不是与其他网络流量共享一个接口。这样可以确保MGMT接口的可用性和安全性，并防止未经授权的访问和攻击。

在管理设备时，建议采取以下措施以确保MGMT接口的安全：

1. 禁用不必要的服务，例如Telnet、FTP等，并仅启用必要的服务。
2. 对MGMT接口启用安全访问，例如使用HTTPS协议进行连接，并配置SSL证书。
3. 实施访问控制措施，例如限制允许访问MGMT接口的IP地址和用户，以防止未经授权的访问。
4. 定期检查MGMT接口的访问日志，并查看是否有异常访问行为。
5. 定期更新设备的固件和补丁，以修复安全漏洞和提高设备的安全性能。



MGMT 端口是指管理端口（Management Port），也称为管理接口或控制接口，是一种特殊的网络接口，-用于设备的远程管理和监控。在网络设备（如路由器、交换机、防火墙等）中，MGMT端口通常用于设备的配置、监控、故障排除等管理操作，与普通的数据接口（如Ethernet端口）分开使用，以提高设备的安全性和可管理性。

MGMT端口通常具有特殊的管理协议，如SNMP（Simple Network Management Protocol）、SSH（Secure Shell）、Telnet等，可以通过这些协议来远程访问设备并进行管理操作。MGMT端口还可以与其他网络安全技术（如VPN、ACL等）结合使用，以增强设备的安全性和管理能力。在某些情况下，MGMT端口也可以被用于设备之间的管理通信。





# SonicWALL

## SonicWALL 硬件防火墙相关术语

### 区域

在SonicWALL防火墙中，区域是指网络拓扑结构中的一个区域或子网。区域定义了网络上的不同部分，并为管理员提供了管理和保护网络流量的一种方法。SonicWALL防火墙支持以下五个默认的区域：

**WAN区域**

- WAN（Wide Area Network）广域网，是指连接到互联网的网络。
- WAN区域通常是从ISP（Internet Service Provider，互联网服务提供商）获取的公共IP地址所在的区域。

**LAN区域**

- LAN（Local Area Network）有线局域网，是指内部网络，通常用于连接计算机、服务器和其他设备。
- LAN区域是通常是公司内部网络。

**WLAN区域**

- WLAN（Wireless Local Area Network）无线局域网，是指通过无线网络连接的网络。WLAN区域是指通过WiFi连接的网络。

**DMZ区域**

- DMZ（Demilitarized Zone）是指介于内部网络和外部网络之间的区域。DMZ区域通常用于放置公共服务器，例如Web服务器、邮件服务器等。DMZ区域允许外部用户访问公共服务器，但同时保护内部网络不受攻击。
- DMZ通常是通过将服务器与防火墙的不同接口连接来实现的。在这种设置中，防火墙将对外部网络和DMZ之间的流量进行过滤和管理，确保外部网络无法直接访问内部网络。

**VPN区域**

VPN（Virtual Private Network）是指通过公共网络建立安全的连接。VPN区域是连接到远程VPN网关的网络。VPN区域通常用于远程用户访问内部网络。

**PS：**

- 此外，管理员还可以创建自定义区域以满足特定需求，例如分割内部网络、连接分支机构等。

- 每个区域都有自己的安全策略和访问规则，管理员可以通过定义不同的访问规则和安全策略来保护每个区域中的网络流量，并控制数据流量进出网络。




### 源 & 目标

**SonicWALL的访问规则中，为什么有两对源和目标？**

- 第一对源和目标是用于描述数据流量进入防火墙的区域和要访问的目标区域。这对源和目标通常称为“入站源和目标”。入站源指定了从哪个区域流入数据流量，入站目标指定了数据流量将被路由到哪个区域。

- 另一对源和目标是用于描述数据流量离开防火墙的区域和要访问的目标区域。这对源和目标通常称为“出站源和目标”。出站源指定了哪个区域中的IP地址或网络请求将被转发，而出站目标则指定了请求将发送到哪个区域中的IP地址或网络。

- 使用两对源和目标允许管理员更准确地控制网络中的数据流量，从而提高网络安全性和管理效率。



### 地址对象 & 地址组

在SonicWALL防火墙中，地址对象和地址组都用于定义网络地址和IP地址范围。两者的区别如下：

1. 地址对象是一个**单独的**IP地址、子网、IP地址范围或FQDN（Fully Qualified Domain Name，全限定域名）。每个地址对象只包含一个网络地址。地址对象可用于定义防火墙规则、VPN策略和NAT规则等。
2. 地址组是一组地址**对象的集合**。可以将多个地址对象添加到地址组中，以便更方便地定义规则。地址组可用于减少防火墙规则的数量，同时可以使规则更易于管理。

因此，可以将地址对象视为一个单独的地址实体，而地址组是多个地址对象的集合。地址组通常用于更高级的网络配置，可以减少管理工作并简化规则定义。 















### NAT

NAT（Network Address Translation）是一种网络地址转换技术，它可以将一个内部网络的私有IP地址映射为公共IP地址，以便在互联网上进行通信。硬件防火墙通常支持NAT功能，可以通过将内部网络IP地址转换为公共IP地址来增强网络安全性。



#### NAT-T

NAT-T（NAT Traversal）是一种NAT穿透技术，可以让VPN数据包在经过NAT设备时保持加密和完整性，以便更好地保护数据和提高网络安全性。硬件防火墙通常支持NAT-T功能，可以使用NAT-T技术来支持远程VPN访问，以保护用户隐私和数据安全。



#### PAT

PAT（Port Address Translation）是一种端口地址转换技术，用于将内部IP地址和端口映射到外部IP地址和端口，以便实现内部网络与外部网络之间的通信。硬件防火墙通常支持PAT功能，可以使用PAT技术来保护内部网络免受外部网络的攻击。



### VPN

VPN（Virtual Private Network）是一种加密隧道，可以在公共网络上建立一个私有网络，以便在网络上进行安全通信。硬件防火墙通常支持VPN功能，可以通过VPN建立一个安全的加密隧道，以保护远程用户和分支机构的网络连接。





### IDS/IPS

IDS（Intrusion Detection System）和IPS（Intrusion Prevention System）是一种用于检测和阻止网络攻击的技术。IDS可以检测到网络攻击，并发出警报，而IPS可以阻止攻击并且可以自动进行响应。硬件防火墙通常支持IDS/IPS功能，可以检测和阻止网络攻击，提高网络安全性。



### HIPS

HIPS（Host-based Intrusion Prevention System）是一种基于主机的入侵预防系统，可以保护主机系统免受恶意软件和入侵攻击的影响。硬件防火墙通常支持HIPS功能，可以使用多种技术和方法来保护主机系统安全，以提高网络安全性和保护用户隐私。



### DPI

DPI（Deep Packet Inspection）是一种深度数据包检查技术，可以检查和分析数据包中的所有内容，包括应用程序协议、数据类型、文件类型等。硬件防火墙通常支持DPI功能，可以检测和阻止包含恶意内容或危险文件的数据包，以提高网络安全性。





### SP

SPI（Stateful Packet Inspection）是一种有状态数据包检测技术，可以识别网络数据包的状态，以便更好地管理网络流量和提高网络安全性。硬件防火墙通常支持SPI功能，可以使用SPI技术来检测和过滤网络数据包中的内容，以防止恶意软件和网络攻击。



### ACL

ACL（Access Control List）是一种用于限制网络访问的列表，通常包括IP地址、协议类型、端口号等参数。硬件防火墙通常支持ACL功能，可以根据ACL规则限制或允许特定的流量进入或离开网络。





### DoS/DDoS

DoS（Denial of Service）和DDoS（Distributed Denial of Service）是两种常见的网络攻击类型，可以通过大量请求或数据包来占用网络资源，以阻止合法用户的访问。硬件防火墙通常支持DoS/DDoS防护功能，可以使用多种技术来检测和防御DoS/DDoS攻击，以保护网络资源和提高网络可靠性。



### IPSec

IPSec（Internet Protocol Security）是一种用于在互联网协议（IP）网络上保护数据传输的协议套件，它通过在网络层提供加密、认证和完整性保护来确保数据传输的安全性。

在防火墙中，IPSec可以用作一种防御措施，用于保护内部网络和外部网络之间的通信。通过在防火墙上配置IPSec，可以实现加密和身份验证等安全机制，从而保护网络通信不受未经授权的访问和数据泄露的影响。同时，IPSec还可以提供完整性保护，防止数据被篡改或损坏。

在防火墙中使用IPSec的一种常见场景是通过VPN（Virtual Private Network）建立安全的远程访问连接。在这种情况下，IPSec可以用于加密和保护通过VPN隧道传输的数据，以确保数据传输的机密性和完整性。



### 负载均衡

负载均衡是一种将网络流量分配到多个服务器或设备上的技术，以提高系统的性能和可靠性。硬件防火墙通常支持负载均衡功能，可以在多个服务器或设备之间均衡分配流量，以提高网络性能和可靠性。



### 虚拟化

虚拟化是一种将多个物理设备模拟成一个或多个虚拟设备的技术，以便更好地利用物理资源。硬件防火墙通常支持虚拟化功能，可以将多个虚拟防火墙部署在一个物理设备上，以便更好地管理和利用网络资源。



### 网络监控

网络监控是一种监视网络活动的技术，可以监视网络流量、带宽使用、连接速度等，以便识别和解决网络问题。硬件防火墙通常支持网络监控功能，可以监视网络流量、带宽使用等，以便及时识别和解决网络问题。



### 安全区域 & 对象组

安全区域和对象组是硬件防火墙中的两个重要概念，它们的作用是帮助管理网络流量和提高网络安全性。

1. 安全区域（Security Zone）：安全区域是指网络中划分的一组安全域，通常是由一组相互信任的网络设备组成，这些设备可以通过防火墙进行访问控制和流量过滤。安全区域可以根据安全需求、网络结构和业务流程等进行划分，以便更好地控制网络访问和提高网络安全性。
2. 对象组（Object Group）：对象组是一组网络对象的集合，可以根据对象的共同特征进行组合，以便更好地管理网络流量和提高网络安全性。对象组通常包括IP地址、端口号、协议类型等网络对象，可以通过防火墙的访问控制策略进行流量过滤和访问控制。

在硬件防火墙中，安全区域和对象组常常一起使用，可以更好地管理网络流量和提高网络安全性。例如，可以将网络设备分为不同的安全区域，然后使用对象组对不同的安全区域进行访问控制和流量过滤，以提高网络安全性。





# FireEye

## FireEye 防火墙连接串口

**2.1 Using the Console**

To access the CLI of the FireEye appliance using the console port, follow these steps:

1. Connect the serial port of your computer directly to the DB-9 console port on the FireEye 

appliance.

2. Open a terminal program on your system, such as Putty.

3. Configure the serial communication settings of your program as follows:
   - Bits per second: 115,200
   - Data bits: 8
   - Stop bit: 1
   - Parity: None

When prompted, enter your username and password. The default password for the **admin** account is 

‘admin’.

## FireEye 串口常用指令

```sh
enable # 进入特权模式
configure terminal # 进入全局配置模式 
exit # 退出特权或全局配置模式
```

### 全局配置模式下

```sh
interface ether1 ip address xxx.xxx.xxx.xxx/24 # 设置ipv4地址方法一
interface ether1 ip address xxx.xxx.xxx.xxx 255.255.255.0 # 设置ipv4地址方法二

sh interface ether1 brief # 查看IPv4和IPv6接口状态

no interface ether1 ip address 然后敲回车 # 删除IPv4地址

write memory # 保存配置

# 为设备分配默认网关
ip default-gateway <IP address of default gateway>
ip default-gateway xxx.xxx.xxx.xxx

# 分配DNS服务器
ip name-server <DNS Server IP address>
ip name-server xxx.xxx.xxx.xxx

interface ether1 ipv6 address xxxx:xxxx:xxxx:xxxx::xxxx/64 # 设置ipv6地址方法一
interface ether1 ipv6 enable # 启用ipv6接口

hostname XXXXX # 设置主机名


shutdown # 禁用接口?
```

