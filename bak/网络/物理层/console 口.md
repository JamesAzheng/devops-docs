# 串口概述

串口是一种常用的计算机通信接口，用于在计算机和其他设备之间传输数据。串口传输的数据是一位一位地串行传输，因此称为“串口”。

串口包括发送端口（Tx）和接收端口（Rx），用于发送和接收数据。在计算机上，通常使用RS-232串口标准，该标准规定了串口的电气信号、物理接口和数据格式等方面的要求。

串口通常使用9针或25针连接器，其中9针连接器包括TXD、RXD、RTS、CTS、DTR、DSR、DCD、RI和GND等引脚，其中TXD和RXD分别用于发送和接收数据。而25针连接器通常包括更多的引脚，用于支持更多的功能。

串口通信需要双方在传输数据前先约定好传输的波特率、数据位、校验位和停止位等参数，以保证数据的正确传输。常用的串口参数包括9600波特率、8数据位、无校验位和1个停止位。

串口可以用于连接计算机和各种设备，例如调制解调器、打印机、数码相机、传感器等。在计算机上，可以通过串口连接到路由器、交换机、服务器等设备进行配置和管理。

串口通常需要使用串口线连接设备，其中一端连接到计算机的串口，另一端连接到设备的串口。在计算机上，可以使用终端模拟器等工具进行串口通信，例如HyperTerminal、PuTTY等。





# 串口通用常用命令汇总

下面这些命令是串口通用的，可以在多种设备上使用，例如路由器、交换机等。但不同设备的具体命令可能会略有不同，需要根据设备类型和型号进行具体调整。

```sh
enable # 进入特权模式。

disable # 退出特权模式。

configure terminal # 进入全局配置模式。

help # 查看帮助信息。

show version：查看设备版本信息。

show interfaces：查看设备接口信息。

show running-config：查看当前配置。

show startup-config：查看设备启动配置。

copy running-config startup-config：保存当前配置到启动配置中。

reload：重启设备。

exit：退出当前模式。

interface interface-name：进入接口配置模式。

shutdown：关闭接口。

no shutdown：打开接口。

ip address ip-address mask：配置接口IP地址和子网掩码。

exit：退出当前模式。

ping destination：测试网络连通性。
```





# minicom

- Minicom是一种常用的串口通讯程序，用于通过串口连接到外部设备并与其进行通信。

- https://linux.die.net/man/1/minicom

## minicom 命令说明

- `Usage: minicom [OPTION]... [configuration]`

```sh
# 串口参数：
-b BAUDRATE # 设置波特率，如设置为115200，使用参数-b 115200
-p PARITY   # 设置校验位，如设置为奇校验，使用参数-p O
-d DEVICE   # 指定串口设备，如/dev/ttyS0，使用参数-d /dev/ttyS0
-s STOPBITS # 设置停止位，如设置为1位，使用参数-s 1
-8 # 设置数据位为8位


# 会话参数：
-c COMMAND # 在启动Minicom时自动执行命令，如执行命令“ls -al”，使用参数-c "ls -al"
-t TIMEOUT # 设置会话超时时间，如设置为10秒，使用参数-t 10
-m # 启用模拟器模式
-n # 禁用转义序列
-e ECHO # 设置回显模式，如设置为“local”，使用参数-e local
-x # 打开16进制显示模式
-S FILENAME # 将会话记录保存到文件，如保存到文件“log.txt”，使用参数-S log.txt


# 其他参数：
-h # 显示帮助信息
-v # 显示版本信息
```





## minicom 使用范例

Minicom命令是交互式的命令行工具，它可以通过串口连接到外部设备并与之进行通信，同时也提供了交互式命令模式和非交互式命令模式两种模式。

### 交互模式

在交互式命令模式下，用户可以通过按下Ctrl+A进入命令模式，然后输入相应的命令来控制Minicom程序的行为，如设置串口参数、打开日志文件等。

```sh
minicom  # 启动Minicom程序

Ctrl+A   # 进入Minicom命令模式

Ctrl+A, Z # 显示Minicom命令菜单

Ctrl+A, X # 退出Minicom程序

Ctrl+A, O # 配置串口参数，如波特率、数据位、停止位、校验位等。

Ctrl+A, S # 保存当前Minicom的配置。

Ctrl+A, L # 清空当前终端窗口。

Ctrl+A, F # 打开日志文件，将所有通信数据记录到文件中。

Ctrl+A, M # 打开/关闭免打扰模式，免打扰模式下，Minicom不会自动回显输入的字符。

Ctrl+A, Q # 退出免打扰模式。

Ctrl+A, E # 发送BREAK信号。

Ctrl+A, R # 重新启动Minicom程序。

Ctrl+A, P # 打开/关闭流控制。

Ctrl+A, D # 启动/停止调试模式。

Ctrl+A, H # 显示帮助信息。
```



### 非交互模式

而在非交互式命令模式下，用户可以在命令行中直接使用Minicom命令，而不需要进入交互式命令模式。在这种模式下，用户可以在命令行中直接指定Minicom的参数选项和命令，并且不需要手动输入Ctrl+A来进入命令模式。

- 打开串口连接：

  - `minicom -b 115200 -d /dev/ttyUSB0`
- 通过串口连接到外部设备并设置参数：

  - `minicom -b 9600 -p N -s 1 -d /dev/ttyS0`
- 启动Minicom时执行命令：

  - `minicom -c "ls -al"`
- 启用模拟器模式：

  - `minicom -m`
- 将会话记录保存到文件：

  - `minicom -S log.txt`

### PS

可以通过在命令行中使用"-S"参数将会话记录保存到文件中，然后再通过非交互式命令模式运行Minicom程序，以自动读取保存的会话记录并执行相应的操作。





# 常见物理设备连接 console 口

## 交换机

### 迈普

- 波特率：9600
- 数据位：8
- 停止位：1
- 奇偶效验：无
- 流控制：无

### 华为

- 波特率：9600
- 数据位：8
- 停止位：1
- 奇偶效验：无
- 流控制：无



## 防火墙

### SonicWall

- 波特率：115200
- 数据位：8
- 停止位：1
- 奇偶效验：无
- 流控制：无

### FireEye

- 波特率：115200
- 数据位：8
- 停止位：1
- 奇偶效验：无
- 流控制：无