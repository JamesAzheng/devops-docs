---
title: "字典"
---

# 字典键

字典中的键（key）是字典中用来唯一标识值（value）的部分。在 Python 字典中，键必须是不可变的对象，比如整数、字符串或元组等。键提供了对字典中值的快速访问，因为它们是唯一的，可以用来索引到特定的值。

下面是一个简单的示例说明如何使用字符串作为键来创建一个字典：

```python
my_dict = {'name': 'Alice', 'age': 30, 'gender': 'female'}

# 使用键来访问对应的值
print(my_dict['name'])    # 输出: 'Alice'
print(my_dict['age'])     # 输出: 30
print(my_dict['gender'])  # 输出: 'female'
```

你也可以使用整数作为键：

```python
my_dict = {1: 'apple', 2: 'banana', 3: 'orange'}

# 使用整数键来访问对应的值
print(my_dict[1])  # 输出: 'apple'
print(my_dict[2])  # 输出: 'banana'
print(my_dict[3])  # 输出: 'orange'
```

需要记住的是，字典中的键必须是唯一的。如果你尝试用已存在的键去添加新值，它会覆盖原来的值。值可以是任何数据类型，包括列表、字典等。



在 Python 中，字典的键必须是**可哈希**的，这意味着键必须是不可变的数据类型。因此，**列表这样的可变数据类型不能作为字典的键**。但是元组这样的不可变数据类型可以作为键。

例如，你可以使用元组作为字典的键：

```python
my_dict = {('apple', 'banana'): 5, ('orange', 'grape'): 3}

# 使用元组作为键来访问对应的值
print(my_dict[('apple', 'banana')])  # 输出: 5
print(my_dict[('orange', 'grape')])  # 输出: 3
```

但如果尝试使用列表作为字典的键，会引发 TypeError 错误：

```python
my_dict = {['apple', 'banana']: 5}
# 这行代码会引发 TypeError: unhashable type: 'list'
```

因此，虽然列表是可变的，不能作为字典的键，但你仍然可以将列表作为字典的值。



# 字典值

Python 中的字典的值可以是任何数据类型，包括列表。

```python
# 创建一个字典，其值为列表
my_dict = {'numbers': [1, 2, 3, 4], 'fruits': ['apple', 'banana', 'orange']}

# 访问字典中值为列表的键
print(my_dict['numbers'])  # 输出: [1, 2, 3, 4]
print(my_dict['fruits'])   # 输出: ['apple', 'banana', 'orange']
```

在这个例子中，字典 `my_dict` 中的值是列表。你可以使用键来访问这些列表，并对列表进行操作，就像对任何其他列表一样。



# 生成字典

生成一个空字典：

```python
empty_dict = {}
```

创建一个带有键值对的字典：

```python
# 创建一个带有一些键值对的字典
my_dict = {'apple': 3, 'banana': 5, 'orange': 2}

# 或者逐步添加键值对
another_dict = {}
another_dict['dog'] = 'woof'
another_dict['cat'] = 'meow'
```

如果你有一组键和一组相应的值，你可以使用 `zip` 函数来创建字典：

```python
keys = ['a', 'b', 'c']
values = [1, 2, 3]

# 使用zip函数将键和值对应起来，然后用dict()将其转换为字典
my_dict = dict(zip(keys, values))
```

这样就创建了一个包含键值对 `{'a': 1, 'b': 2, 'c': 3}` 的字典。



# 字典推导式

字典推导式是一种在 Python 中用简洁方式创建字典的方法。它类似于列表推导式，但用于字典的创建。

下面是一个简单的例子，展示了如何使用字典推导式创建一个简单的字典：

```python
# 创建一个字典，键是 1 到 5 的数字，值是它们的平方
my_dict = {x: x**2 for x in range(1, 6)}
print(my_dict)
```

这会输出：

```
{1: 1, 2: 4, 3: 9, 4: 16, 5: 25}
```

字典推导式也可以使用条件语句来过滤或修改键值对：

```python
# 创建一个字典，将键是 1 到 5 的数字，值是它们的平方，但仅包括偶数的键值对
my_dict = {x: x**2 for x in range(1, 6) if x % 2 == 0}
print(my_dict)
```

这会输出：

```
{2: 4, 4: 16}
```

字典推导式是一个非常便利且灵活的工具，可以根据特定需求创建字典，并可以结合条件语句和循环来生成需要的键值对。



# 通过键获取对应的值

可以通过键来获取对应的值：

```python
my_dict = {'a': 1, 'b': 2, 'c': 3}

# 通过键获取对应的值
value_of_a = my_dict['a']
print(value_of_a)  # 输出: 1
```

这里，`my_dict['a']` 访问了字典 `my_dict` 中键为 `'a'` 的值。



# 字典常用方法

## items() 获取键值对

在 Python 中，可以使用多种方法来访问字典的键值对。基本的方法是使用字典的 `items()` 方法，该方法返回包含键值对的元组。

例子：

```python
my_dict = {'a': 1, 'b': 2, 'c': 3}

# 使用 items() 方法获取键值对
for key, value in my_dict.items():
    print(f"Key: {key}, Value: {value}")
```

这个示例中，`items()` 方法被用来获取字典 `my_dict` 中的键值对。在循环中，每次迭代会将键值对解包成 `key` 和 `value` 两个变量，然后可以针对这些值进行操作。



## keys() 获取所有可用的键

在 Python 中，可以使用字典的 `keys()` 方法来查看字典中所有可用的键。这个方法返回一个包含字典所有键的视图对象，你可以将其**转换成列表**或者直接循环遍历它来查看所有的键。

例如：

```python
my_dict = {'a': 1, 'b': 2, 'c': 3}

print(my_dict.keys()) # dict_keys(['a', 'b', 'c'])

# 将视图对象转换成列表
keys_list = list(my_dict.keys())
print(keys_list)  # 输出: ['a', 'b', 'c']

# 或者直接遍历视图对象来查看所有键
for key in my_dict.keys():
    print(key)  # 输出: a, b, c
```

使用 `keys()` 方法可以很方便地查看字典中所有可用的键。





## get() 获取指定键的值

在Python中，`get()`是字典（`dict`）类型的一种方法，用来获取指定键的值。`get()`方法与直接使用索引操作符（`[]`）有一些区别，尤其在键不存在的情况下，`get()`方法提供了更好的错误处理机制。

### `get()` 方法语法：

```python
dict.get(key, default=None)
```

- **key**: 你想要获取的键。
- **default**: 可选参数，如果字典中没有该键时，返回这个默认值。如果没有提供该参数，则默认为 `None`。

### 关键特点：

1. **安全性**：
   - 使用`get()`方法，如果键不存在，不会抛出`KeyError`错误。
   - 如果键存在，则返回相应的值。
   - 如果键不存在且没有指定默认值，返回`None`。
2. **与索引访问区别**：
   - 使用字典的索引操作（如 `dict[key]`），如果键不存在，会抛出`KeyError`异常。
   - 使用`get()`方法时，如果键不存在，可以指定默认值，避免异常。

### 示例：

#### 示例 1: 获取存在的键

```python
my_dict = {"a": 1, "b": 2, "c": 3}
value = my_dict.get("b")
print(value)  # 输出 2
```

#### 示例 2: 获取不存在的键，不提供默认值

```python
my_dict = {"a": 1, "b": 2, "c": 3}
value = my_dict.get("d")
print(value)  # 输出 None，因为 "d" 不在字典中，且没有指定默认值
```

#### 示例 3: 获取不存在的键，提供默认值

```python
my_dict = {"a": 1, "b": 2, "c": 3}
value = my_dict.get("d", "默认值")
print(value)  # 输出 "默认值" 因为 "d" 不在字典中，返回默认值
```

#### 示例 4: 用于防止 `KeyError` 异常

```python
my_dict = {"name": "John", "age": 25}
name = my_dict.get("name", "Unknown")  # 存在，返回 "John"
city = my_dict.get("city", "Unknown")  # 不存在，返回 "Unknown"
print(name)  # 输出 "John"
print(city)  # 输出 "Unknown"
```

### 小结：

- `get()`方法常用于从字典中安全地访问键值。
- 与直接使用字典索引不同，`get()`不会抛出`KeyError`，并允许提供默认值。
- 如果键不存在且没有提供默认值，`get()`返回`None`。

这种特性使得`get()`在需要容错处理的场景中非常有用。