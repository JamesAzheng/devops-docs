---
title: "磁盘管理"
---

# 逻辑卷
## 扩展磁盘空间
下面是通过逻辑卷（LVM）将新加的 100G 硬盘空间扩展到根目录 ( / ) 的步骤。
```sh
# 1. 确认新添加的磁盘
# lsblk 
NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sda                         8:0    0  100G  0 disk 
├─sda1                      8:1    0    1M  0 part 
├─sda2                      8:2    0    2G  0 part /boot
└─sda3                      8:3    0   98G  0 part 
  └─ubuntu--vg-ubuntu--lv 253:0    0   98G  0 lvm  /
sdb                         8:16   0  100G  0 disk  # 新添加的磁盘


# 2. 将整个磁盘创建为物理卷 (PV)
pvcreate /dev/sdb


# 3. 查找当前根目录所在的卷组名称
# vgs
  VG        #PV #LV #SN Attr   VSize   VFree
  ubuntu-vg   1   1   0 wz--n- <98.00g    0 
# lvs
  LV        VG        Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  ubuntu-lv ubuntu-vg -wi-ao---- <98.00g 


# 4. 扩展卷组
vgextend ubuntu-vg /dev/sdb # 将新的物理卷 /dev/sdb 添加到卷组 ubuntu-vg


# 5. 查看卷组总容量是否已经增加
# vgs
  VG        #PV #LV #SN Attr   VSize   VFree   
  ubuntu-vg   2   1   0 wz--n- 197.99g <100.00g


# 6. 扩展逻辑卷
lvextend -l +100%FREE ubuntu-vg/ubuntu-lv # 将 ubuntu-vg 中所有可用的空间分配给 ubuntu-lv


# 7. 确定要扩展路径所使用的文件系统类型
# df -Th /
Filesystem                        Type  Size  Used Avail Use% Mounted on
/dev/mapper/ubuntu--vg-ubuntu--lv ext4   96G   86G  5.1G  95% /


# 8. 扩展文件系统，如果是 ext4 文件系统
resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv


# 9. 验证扩展结果
# df -h /
Filesystem                         Size  Used Avail Use% Mounted on
/dev/mapper/ubuntu--vg-ubuntu--lv  195G   86G  100G  47% /
```